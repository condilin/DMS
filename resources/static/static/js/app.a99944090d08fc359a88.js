webpackJsonp([1],{"33pd":function(t,e){},"3cGc":function(t,e){},Dr4h:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("//Fk"),s=a.n(i),l=a("7+uW"),o=a("mvHQ"),n=a.n(o),r={name:"App",mounted:function(){window.addEventListener("unload",this.saveState),window.addEventListener("resize",this.setHeight)},methods:{saveState:function(){sessionStorage.setItem("state",n()(this.$store.state.currTable_id))},setHeight:function(){this.$store.commit("setTable_height",window.innerHeight-260>0?window.innerHeight-260:400)}}},c={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var d=a("VU/8")(r,c,!1,function(t){a("33pd")},null,null).exports,u=a("NYxO");l.default.use(u.a);var h=new u.a.Store({state:{currTable_id:sessionStorage.getItem("state")?JSON.parse(sessionStorage.getItem("state")):0,table_height:window.innerHeight-260,repeated_val:""},mutations:{setCurrTable_id:function(t,e){t.currTable_id=e},setRepeated_val:function(t,e){t.repeated_val=e},setTable_height:function(t,e){t.table_height=e}}}),m=a("/ocq"),p={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("header",{staticClass:"header clearfix background"},[e("div",{staticClass:"title"},[this._v("数据管理系统")])])}]};var f=a("VU/8")({name:"topHeader",data:function(){return{}},computed:{currTable_id:function(){return this.$store.state.currTable_id}},methods:{}},p,!1,function(t){a("ODQP")},"data-v-79631f29",null).exports,v=["NORMAL","ASCUS","LSIL","ASC-H","HSIL","SCC","AGC1","AGC2","AGC3","ADC","TRI","FUNGI","ACTINO","HSV","CC","EC"],_=["AGC1","AGC2","AGC3"],g=a("XLwt"),y={name:"indexCon",data:function(){return{dataList:{},repeatCount:""}},created:function(){var t=this;t.$axios.get(t.API+"/api/v1/images/statistics/").then(function(e){t.dataList=e.data,t.handleData()}).catch(function(t){}),t.$axios.get(t.API+"/api/v1/cases/duplicates/?limit=10&offset=10").then(function(e){e.data.count>0&&(t.repeatCount="!")}).catch(function(e){t.$message("病例文件重复接口获取失败！")}),t.$axios.get(t.API+"/api/v1/images/duplicates/?limit=10&offset=10").then(function(e){e.data.count>0&&(t.repeatCount="!")}).catch(function(e){t.$message("大图文件重复接口获取失败！")})},mounted:function(){},methods:{handleData:function(){for(var t=this,e=g.init(document.getElementById("echarts-a")),a=[],i=[],s=0;s<t.dataList.waveplate_source_count.length;s++)a.push(t.dataList.waveplate_source_count[s].waveplate_source),i.push(t.dataList.waveplate_source_count[s].waveplate_source_count);e.setOption({title:{text:"切片来源"},tooltip:{trigger:"item",formatter:function(e){return e.name+": "+e.data+"("+(e.data/t.dataList.case_count*100).toFixed(3)+"%)"}},xAxis:{data:a},yAxis:{},series:[{name:"数量",type:"bar",data:i,itemStyle:{normal:{label:{show:!0,position:"top",formatter:function(e){var a=e.data;return a+"\n("+(a/t.dataList.case_count*100).toFixed(3)+"%)"},textStyle:{color:"#000"}}}}}]});var l=[],o=[],n=0;for(s=0;s<t.dataList.diag_label_count.length;s++){var r=t.dataList.diag_label_count[s].diagnosis_label_count,c=t.dataList.diag_label_count[s].diagnosis_label_doctor_filter,d={value:r,name:c};if(-1!=v.indexOf(c)){if(-1!=_.indexOf(c)){n+=r;continue}l.push(t.dataList.diag_label_count[s].diagnosis_label_doctor_filter),o.push(d)}}l.push("AGC"),o.push({value:n,name:"AGC"}),g.init(document.getElementById("echarts-b")).setOption({title:{text:"",left:"center"},tooltip:{trigger:"item",formatter:function(e){return e.data.name+": "+e.data.value+"("+(e.data.value/t.dataList.case_count*100).toFixed(3)+"%)"}},legend:{bottom:10,left:"center",data:l},series:[{name:"",type:"pie",radius:"65%",center:["50%","50%"],selectedMode:"single",data:o,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]})},toRenames:function(){this.$store.commit("setCurrTable_id",8)}}},C={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"indexCon"},[a("div",{staticClass:"top"},[a("div",{staticClass:"information",on:{click:t.toRenames}},[a("i",{staticClass:"fa fa-comment"}),""!=t.repeatCount?a("span",{staticClass:"repeatCount"},[t._v(t._s(t.repeatCount))]):t._e()]),t._v(" "),a("div",{staticClass:"top-left"},[t._m(0),t._v(" "),a("div",{staticClass:"total"},[a("p",[t._v("病例总数："),a("span",{staticClass:"big"},[t._v(t._s(t.dataList.case_count))])]),t._v(" "),a("p",[t._v("大图总数："),a("span",{staticClass:"big"},[t._v(t._s(t.dataList.image_count))])])]),t._v(" "),a("div",{staticClass:"echarts-a",attrs:{id:"echarts-a"}})]),t._v(" "),a("div",{staticClass:"top-right"},[a("div",{staticClass:"right-title"},[t._v("诊断类别：")]),t._v(" "),a("div",{staticClass:"echarts-b",attrs:{id:"echarts-b"}}),t._v(" "),a("div",{staticClass:"right-count"},t._l(t.dataList.resolution_count,function(e){return a("div",{staticClass:"count-item"},[a("span",[t._v(t._s("20X"==e.resolution?"20倍数字切片":"40倍数字切片")+"：")]),t._v(" "),a("span",[t._v(t._s(e.resolution_count))]),t._v(" "),a("span",{staticStyle:{float:"right"}},[t._v(t._s(e.label_prop))])])}),0)])]),t._v(" "),t._m(1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"train"},[e("div",{staticClass:"middle"},[this._v("训练结果：")]),this._v(" "),e("div",{staticClass:"result"},[this._v("这是训练结果")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bottom"},[a("div",{staticClass:"bottom-title"},[a("span",{staticClass:"middle"},[t._v("当前算法版本：")]),t._v("XX4562")]),t._v(" "),a("div",{staticClass:"bottom-items"},[a("span",[t._v("训练数据版本： XXXXXX")]),t._v(" "),a("span",[t._v("审核数据版本： XXXXXX")]),t._v(" "),a("span",[t._v("训练数量： XXXXXX")]),t._v(" "),a("span",[t._v("描述+增强策略： XXXXXX")]),t._v(" "),a("span",[t._v("时间： 2019年1月8日")])])])}]};var w=a("VU/8")(y,C,!1,function(t){a("d+db")},"data-v-044b90c6",null).exports,x=a("P2DC"),k={name:"dataTable_cases",data:function(){return{tableData:[],isLoading:!0,isNetErr:!1,form:{},dialogFormVisible:!1,formLabelWidth:"150px",count:0,currentPage:1,offset:0,limit:20,search_val:"",labelList:[],downloadsUrl:"",DialogVisible2:!1,uploadUrl:"",isUpload:!1}},computed:{table_height:function(){return this.$store.state.table_height},repeated_val:function(){return this.$store.state.repeated_val}},created:function(){this.labelList=x,this.downloadsUrl=this.API+"/api/v1/cases/downloads/?type=",this.uploadUrl=this.API+"/api/v1/cases/uploads/"},mounted:function(){""!=this.$store.state.repeated_val?(this.search_val=this.$store.state.repeated_val,this.search()):this.getCases()},destroyed:function(){this.$store.commit("setRepeated_val","")},methods:{getCases:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/api/v1/cases/?limit=20&offset=0",e=this;e.$axios.get(this.API+t).then(function(t){e.tableData=t.data.results,e.isLoading=!1,e.count=t.data.count}).catch(function(t){e.isNetErr=!0})},deleteRow:function(t,e){var a=this;this.$confirm("此操作将永久删除该文件, 是否继续?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$axios.delete(a.API+"/api/v1/cases/"+e[t].id+"/").then(function(t){a.search(),a.$message({type:"success",message:"删除成功!"})}).catch(function(t){a.$message("病例删除接口获取失败！")})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},updateRow:function(t,e){this.form=JSON.parse(n()(e[t])),this.dialogFormVisible=!0},submit:function(){var t=this;this.$axios.patch(this.API+"/api/v1/cases/"+this.form.id+"/",this.form).then(function(e){t.$message({message:"更新成功！",type:"success"}),t.dialogFormVisible=!1,""!=t.search_val?t.search():t.getCases("/api/v1/cases/?limit="+t.limit+"&offset="+(t.currentPage-1)*t.limit)}).catch(function(t){})},handleSizeChange:function(t){this.limit=t,this.handleCurrentChange(this.currentPage)},handleCurrentChange:function(t){this.isLoading=!0,this.currentPage=t;var e="/api/v1/cases/?limit="+this.limit+"&offset="+(t-1)*this.limit;this.getCases(e)},search:function(){this.isLoading=!0,""==this.search_val?this.getCases():this.getCases("/api/v1/cases/?pathology="+this.search_val)},success_upload:function(t,e,a){this.isUpload=!1,this.$notify({title:"提示",message:"病例信息导入成功！",duration:0})},before_upload:function(t){if("application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"!=t.type&&"application/vnd.ms-excel"!=t.type)return this.$message.error("仅支持导入excel和csv格式文件！"),!1;this.isUpload=!0},error_upload:function(t,e,a){this.isUpload=!1,this.$notify({title:"提示",message:"病例信息导入失败！",duration:0})},download:function(){this.DialogVisible2=!0}}},L={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"casesTable dataTable"},[t.isLoading?a("div",{staticClass:"loading"},[a("i",{staticClass:"loading-i fa fa-spinner fa-pulse"}),t._v(" "),t.isNetErr?a("span",[t._v("获取数据失败，请检查网络是否异常")]):a("span",[t._v("正在加载中")])]):a("div",[a("div",{staticClass:"search"},[a("div",[a("el-input",{staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"请输入病理号"},model:{value:t.search_val,callback:function(e){t.search_val=e},expression:"search_val"}}),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.search}},[a("i",{staticClass:"fa fa-search"}),t._v("查询")])],1),t._v(" "),a("div",{staticClass:"search-right"},[a("el-button",{attrs:{type:"primary"},on:{click:t.download}},[t._v("导出")]),t._v(" "),a("el-upload",{attrs:{action:t.uploadUrl,"show-file-list":!1,"on-success":t.success_upload,"on-error":t.error_upload,"before-upload":t.before_upload}},[a("el-button",{attrs:{type:"primary"}},[t._v(t._s(t.isUpload?"正在导入中...":"导入")),t.isUpload?a("i",{staticClass:"fa fa-spinner fa-pulse"}):t._e()])],1)],1)]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,"max-height":t.table_height}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"",prop:"pathology",label:"病理号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"diagnosis_label_doctor",label:"医生诊断标签"}}),t._v(" "),a("el-table-column",{attrs:{prop:"waveplate_source",label:"片源"}}),t._v(" "),a("el-table-column",{attrs:{prop:"making_way",label:"切片制式"}}),t._v(" "),a("el-table-column",{attrs:{prop:"check_date",label:"采样/检查时间"}}),t._v(" "),a("el-table-column",{attrs:{prop:"diagnosis_date",label:"诊断时间"}}),t._v(" "),a("el-table-column",{attrs:{prop:"last_menstruation",label:"末次经期时间"}}),t._v(" "),a("el-table-column",{attrs:{prop:"clinical_observed",label:"临床所见","show-overflow-tooltip":!0}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){a.preventDefault(),t.updateRow(e.$index,t.tableData)}}},[t._v("\n\t          更新\n\t        ")]),t._v(" "),""!=t.repeated_val?a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){a.preventDefault(),t.deleteRow(e.$index,t.tableData)}}},[t._v("\n\t          删除\n\t        ")]):t._e()]}}])})],1)],1),t._v(" "),t.isLoading?t._e():a("div",{staticClass:"pager"},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[20,50,100],"page-size":t.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.count},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),a("el-dialog",{attrs:{title:"更新病例记录",visible:t.dialogFormVisible,"append-to-body":!0,center:!0},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{attrs:{model:t.form}},[a("el-form-item",{attrs:{label:"病理号","label-width":t.formLabelWidth}},[t._v("\n\t      "+t._s(t.form.pathology)+"\n\t    ")]),t._v(" "),a("el-form-item",{attrs:{label:"医生诊断标签","label-width":t.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择标签"},model:{value:t.form.diagnosis_label_doctor,callback:function(e){t.$set(t.form,"diagnosis_label_doctor",e)},expression:"form.diagnosis_label_doctor"}},t._l(t.labelList.diagnosis_label,function(t,e){return a("el-option",{key:e,attrs:{label:t.label_name,value:t.label_val}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"片源","label-width":t.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择标签"},model:{value:t.form.waveplate_source,callback:function(e){t.$set(t.form,"waveplate_source",e)},expression:"form.waveplate_source"}},t._l(t.labelList.waveplate_source,function(t,e){return a("el-option",{key:e,attrs:{label:t.label_name,value:t.label_val}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"切片制式","label-width":t.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择标签"},model:{value:t.form.making_way,callback:function(e){t.$set(t.form,"making_way",e)},expression:"form.making_way"}},t._l(t.labelList.making_way,function(t,e){return a("el-option",{key:e,attrs:{label:t.label_name,value:t.label_val}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"采样/检查时间","label-width":t.formLabelWidth}},[a("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:t.form.check_date,callback:function(e){t.$set(t.form,"check_date",e)},expression:"form.check_date"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"诊断时间","label-width":t.formLabelWidth}},[a("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:t.form.diagnosis_date,callback:function(e){t.$set(t.form,"diagnosis_date",e)},expression:"form.diagnosis_date"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"末次经期时间","label-width":t.formLabelWidth}},[a("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:t.form.last_menstruation,callback:function(e){t.$set(t.form,"last_menstruation",e)},expression:"form.last_menstruation"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"临床所见","label-width":t.formLabelWidth}},[a("el-input",{attrs:{type:"textarea"},model:{value:t.form.clinical_observed,callback:function(e){t.$set(t.form,"clinical_observed",e)},expression:"form.clinical_observed"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"提示",visible:t.DialogVisible2,width:"30%"},on:{"update:visible":function(e){t.DialogVisible2=e}}},[a("a",{attrs:{href:t.downloadsUrl+"csv"},on:{click:function(e){t.DialogVisible2=!1}}},[t._v("导出为csv文件")]),a("br"),t._v(" "),a("a",{attrs:{href:t.downloadsUrl+"xlsx"},on:{click:function(e){t.DialogVisible2=!1}}},[t._v("导出为excel文件")])])],1)},staticRenderFns:[]};var D=a("VU/8")(k,L,!1,function(t){a("qr23")},"data-v-6e7caaa4",null).exports,U=a("P2DC"),T={name:"diagnosisTable",data:function(){return{tableData:[],isLoading:!0,dialogFormVisible:!1,form:{},formLabelWidth:"150px",isNetErr:!1,count:0,currentPage:1,offset:0,limit:20,search_val:"",labelList:[],downloadsUrl:"",DialogVisible2:!1,uploadUrl:"",isUpload:!1}},computed:{table_height:function(){return this.$store.state.table_height}},created:function(){this.labelList=U,this.downloadsUrl="http://192.168.2.179:8000/api/v1/diagnosis/downloads/?type=",this.uploadUrl=this.API+"/api/v1/diagnosis/uploads/"},mounted:function(){this.getDiagnosis()},methods:{getDiagnosis:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/api/v1/diagnosis/?limit=20&offset=0",e=this;e.$axios.get(this.API+t).then(function(t){e.tableData=t.data.results,e.isLoading=!1,e.count=t.data.count}).catch(function(t){e.isNetErr=!0})},updateRow:function(t,e){this.form=JSON.parse(n()(e[t])),this.dialogFormVisible=!0},handleSizeChange:function(t){this.limit=t,this.handleCurrentChange(this.currentPage)},handleCurrentChange:function(t){this.isLoading=!0,this.currentPage=t;var e="/api/v1/diagnosis/?limit="+this.limit+"&offset="+(t-1)*this.limit;this.getDiagnosis(e)},search:function(){this.isLoading=!0,""==this.search_val?this.getDiagnosis():this.getDiagnosis("/api/v1/diagnosis/?pathology="+this.search_val)},submit:function(){var t=this;this.$axios.patch(this.API+"/api/v1/diagnosis/"+this.form.id+"/",this.form).then(function(e){t.$message({message:"更新成功！",type:"success"}),""!=t.search_val?t.search():t.getDiagnosis("/api/v1/diagnosis/?limit="+t.limit+"&offset="+(t.currentPage-1)*t.limit),t.dialogFormVisible=!1}).catch(function(e){t.$message("更新失败，失败原因："+e)})},success_upload:function(t,e,a){this.isUpload=!1,this.$notify({title:"提示",message:"诊断信息导入成功！",duration:0})},before_upload:function(t){if("application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"!=t.type&&"application/vnd.ms-excel"!=t.type)return this.$message.error("仅支持导入excel和csv格式文件！"),!1;this.isUpload=!0},error_upload:function(t,e,a){this.isUpload=!1,this.$notify({title:"提示",message:"诊断信息导入失败！",duration:0})},download:function(){this.DialogVisible2=!0}}},S={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"diagnosisTable dataTable"},[t.isLoading?a("div",{staticClass:"loading"},[a("i",{staticClass:"loading-i fa fa-spinner fa-pulse"}),t._v(" "),t.isNetErr?a("span",[t._v("获取数据失败，请检查网络是否异常")]):a("span",[t._v("正在加载中")])]):a("div",[a("div",{staticClass:"search"},[a("div",[a("el-input",{staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"请输入病理号"},model:{value:t.search_val,callback:function(e){t.search_val=e},expression:"search_val"}}),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.search}},[a("i",{staticClass:"fa fa-search"}),t._v("查询")])],1),t._v(" "),a("div",{staticClass:"search-right"},[a("el-button",{attrs:{type:"primary"},on:{click:t.download}},[t._v("导出")]),t._v(" "),a("el-upload",{attrs:{action:t.uploadUrl,"show-file-list":!1,"on-success":t.success_upload,"on-error":t.error_upload,"before-upload":t.before_upload}},[a("el-button",{attrs:{type:"primary"}},[t._v(t._s(t.isUpload?"正在导入中...":"导入")),t.isUpload?a("i",{staticClass:"fa fa-spinner fa-pulse"}):t._e()])],1)],1)]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,"max-height":t.table_height}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"",prop:"pathology",label:"病理号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"diagnosis_label_lastest",label:"最新诊断标签"}}),t._v(" "),a("el-table-column",{attrs:{prop:"his_diagnosis_label1",label:"历史诊断标签1"}}),t._v(" "),a("el-table-column",{attrs:{prop:"his_diagnosis_label2",label:"历史诊断标签2"}}),t._v(" "),a("el-table-column",{attrs:{prop:"his_diagnosis_label3",label:"历史诊断标签3"}}),t._v(" "),a("el-table-column",{attrs:{prop:"his_diagnosis_label4",label:"历史诊断标签4"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){a.preventDefault(),t.updateRow(e.$index,t.tableData)}}},[t._v("\n\t          更新\n\t        ")])]}}])})],1)],1),t._v(" "),t.isLoading?t._e():a("div",{staticClass:"pager"},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[20,50,100],"page-size":t.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.count},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),a("el-dialog",{attrs:{title:"更新诊断记录",visible:t.dialogFormVisible,"append-to-body":!0,center:!0},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{attrs:{model:t.form}},[a("el-form-item",{attrs:{label:"病理号","label-width":t.formLabelWidth}},[t._v("\n\t      "+t._s(t.form.pathology)+"\n\t    ")]),t._v(" "),a("el-form-item",{attrs:{label:"最新诊断标签","label-width":t.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择标签"},model:{value:t.form.diagnosis_label_lastest,callback:function(e){t.$set(t.form,"diagnosis_label_lastest",e)},expression:"form.diagnosis_label_lastest"}},t._l(t.labelList.diagnosis_label,function(t,e){return a("el-option",{key:e,attrs:{label:t.label_name,value:t.label_val}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"历史诊断标签1","label-width":t.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择标签"},model:{value:t.form.his_diagnosis_label1,callback:function(e){t.$set(t.form,"his_diagnosis_label1",e)},expression:"form.his_diagnosis_label1"}},t._l(t.labelList.diagnosis_label,function(t,e){return a("el-option",{key:e,attrs:{label:t.label_name,value:t.label_val}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"历史诊断标签2","label-width":t.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择标签"},model:{value:t.form.his_diagnosis_label2,callback:function(e){t.$set(t.form,"his_diagnosis_label2",e)},expression:"form.his_diagnosis_label2"}},t._l(t.labelList.diagnosis_label,function(t,e){return a("el-option",{key:e,attrs:{label:t.label_name,value:t.label_val}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"历史诊断标签3","label-width":t.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择标签"},model:{value:t.form.his_diagnosis_label3,callback:function(e){t.$set(t.form,"his_diagnosis_label3",e)},expression:"form.his_diagnosis_label3"}},t._l(t.labelList.diagnosis_label,function(t,e){return a("el-option",{key:e,attrs:{label:t.label_name,value:t.label_val}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"历史诊断标签4","label-width":t.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择标签"},model:{value:t.form.his_diagnosis_label4,callback:function(e){t.$set(t.form,"his_diagnosis_label4",e)},expression:"form.his_diagnosis_label4"}},t._l(t.labelList.diagnosis_label,function(t,e){return a("el-option",{key:e,attrs:{label:t.label_name,value:t.label_val}})}),1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"提示",visible:t.DialogVisible2,width:"30%"},on:{"update:visible":function(e){t.DialogVisible2=e}}},[a("a",{attrs:{href:t.downloadsUrl+"csv"},on:{click:function(e){t.DialogVisible2=!1}}},[t._v("导出为csv文件")]),a("br"),t._v(" "),a("a",{attrs:{href:t.downloadsUrl+"xlsx"},on:{click:function(e){t.DialogVisible2=!1}}},[t._v("导出为excel文件")])])],1)},staticRenderFns:[]};var V=a("VU/8")(T,S,!1,function(t){a("XQYN")},"data-v-6958d1cd",null).exports,P=a("TQvf"),A=a.n(P),I=a("P2DC"),N={name:"imagesTable",data:function(){return{tableData:[],isLoading:!0,isNetErr:!1,count:0,currentPage:1,offset:0,limit:20,dialogFormVisible:!1,form:{},formLabelWidth:"150px",search_val:"",labelList:[],downloadsUrl:"",DialogVisible2:!1,uploadUrl:"",isUpdate:!1}},computed:{table_height:function(){return this.$store.state.table_height},repeated_val:function(){return this.$store.state.repeated_val}},filters:{images_path:function(t){return t.split("=")[2]}},created:function(){this.labelList=I,this.downloadsUrl=this.API+"/api/v1/images/downloads/?type="},mounted:function(){""!=this.$store.state.repeated_val?(this.search_val=this.$store.state.repeated_val,this.search()):this.getImages()},destroyed:function(){this.$store.commit("setRepeated_val","")},methods:{getImages:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/api/v1/images/?limit=20&offset=0",e=this;e.$axios.get(this.API+t).then(function(t){e.tableData=t.data.results,e.isLoading=!1,e.count=t.data.count}).catch(function(t){e.isNetErr=!0})},deleteRow:function(t,e){var a=this;this.$confirm("此操作将永久删除该文件, 是否继续?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$axios.delete(a.API+"/api/v1/images/"+e[t].id+"/").then(function(t){a.search(),a.$message({type:"success",message:"删除成功!"})}).catch(function(t){a.$message("病例删除接口获取失败！")})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},updateRow:function(t,e){this.form=JSON.parse(n()(e[t])),this.dialogFormVisible=!0},handleSizeChange:function(t){this.limit=t,this.handleCurrentChange(this.currentPage)},handleCurrentChange:function(t){this.isLoading=!0,this.currentPage=t;var e="/api/v1/images/?limit="+this.limit+"&offset="+(t-1)*this.limit;this.getImages(e)},search:function(){this.isLoading=!0,""==this.search_val?this.getImages():this.getImages("/api/v1/images/?pathology="+this.search_val)},submit:function(){var t=this;this.$axios.patch(this.API+"/api/v1/images/"+this.form.id+"/",this.form).then(function(e){t.$message({message:"更新成功！",type:"success"}),t.dialogFormVisible=!1,""!=t.search_val?t.search():t.getImages("/api/v1/images/?limit="+t.limit+"&offset="+(t.currentPage-1)*t.limit)}).catch(function(t){})},download:function(){this.DialogVisible2=!0},copy:function(t){new A.a(".storage_path");this.$message({message:"复制成功！",type:"success"})},update:function(){var t=this;if(!this.isUpdate){this.$confirm("更新过程可能需要几分钟，请确定是否要更新","提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(function(){t.isUpdate=!0,t.$axios.post(t.API+"/api/v1/images/updates/",{update_type:"db"},{responseType:"json"}).then(function(e){t.isUpdate=!1,t.$notify({title:"提示",message:e.data.msg+"(一共耗时："+e.data.cost_time+"秒）",duration:0})}).catch(function(e){t.isUpdate=!1,t.$notify({title:"提示",message:"大图信息更新失败",duration:0})})}).catch(function(){t.$message({type:"info",message:"已取消更新"})})}}}},F={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"imagesTable dataTable"},[t.isLoading?a("div",{staticClass:"loading"},[a("i",{staticClass:"loading-i fa fa-spinner fa-pulse"}),t._v(" "),t.isNetErr?a("span",[t._v("获取数据失败，请检查网络是否异常")]):a("span",[t._v("正在加载中")])]):a("div",[a("div",{staticClass:"search"},[a("div",[a("el-input",{staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"请输入病理号"},model:{value:t.search_val,callback:function(e){t.search_val=e},expression:"search_val"}}),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.search}},[a("i",{staticClass:"fa fa-search"}),t._v("查询")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.update}},[t._v(t._s(t.isUpdate?"正在更新中...":"更新")),t.isUpdate?a("i",{staticClass:"fa fa-spinner fa-pulse"}):t._e()])],1),t._v(" "),a("div",{staticClass:"search-right"},[a("el-button",{attrs:{type:"primary"},on:{click:t.download}},[t._v("导出")])],1)]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,"max-height":t.table_height}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"",prop:"pathology",label:"病理号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"file_name",label:"文件名","show-overflow-tooltip":!0}}),t._v(" "),a("el-table-column",{attrs:{prop:"resolution",label:"分辨率"}}),t._v(" "),a("el-table-column",{attrs:{prop:"storage_path",label:"存储路径","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"storage_path",attrs:{"data-clipboard-text":t._f("images_path")(e.row.storage_path)},on:{click:t.copy}},[t._v(t._s(t._f("images_path")(e.row.storage_path)))]),t._v(" "),a("span",[t._v("（单击可复制）")])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"waveplate_source",label:"片源"}}),t._v(" "),a("el-table-column",{attrs:{prop:"is_learn",label:"是否学习"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t\t\t\t"+t._s(e.row.is_learn?"true":"false")+"\n\t      \t")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"diagnosis_label_doctor",label:"医生诊断标签"}}),t._v(" "),a("el-table-column",{attrs:{prop:"diagnosis_label_zhu",label:"朱博士诊断","show-overflow-tooltip":!0}}),t._v(" "),a("el-table-column",{attrs:{prop:"making_way",label:"切片制式","show-overflow-tooltip":!0}}),t._v(" "),a("el-table-column",{attrs:{prop:"scan_time",label:"扫描时间","show-overflow-tooltip":!0}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){a.preventDefault(),t.updateRow(e.$index,t.tableData)}}},[t._v("\n\t          更新\n\t        ")]),t._v(" "),""!=t.search_val?a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){a.preventDefault(),t.deleteRow(e.$index,t.tableData)}}},[t._v("\n\t          删除\n\t        ")]):t._e()]}}])})],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"更新大图记录",visible:t.dialogFormVisible,"append-to-body":!0,center:!0},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{attrs:{model:t.form}},[a("el-form-item",{attrs:{label:"病理号","label-width":t.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.pathology,callback:function(e){t.$set(t.form,"pathology",e)},expression:"form.pathology"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"文件名","label-width":t.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.file_name,callback:function(e){t.$set(t.form,"file_name",e)},expression:"form.file_name"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("确 定")])],1)],1),t._v(" "),t.isLoading?t._e():a("div",{staticClass:"pager"},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[20,50,100],"page-size":t.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.count},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),a("el-dialog",{attrs:{title:"提示",visible:t.DialogVisible2,width:"30%"},on:{"update:visible":function(e){t.DialogVisible2=e}}},[a("a",{attrs:{href:t.downloadsUrl+"csv"},on:{click:function(e){t.DialogVisible2=!1}}},[t._v("导出为csv文件")]),a("br"),t._v(" "),a("a",{attrs:{href:t.downloadsUrl+"xlsx"},on:{click:function(e){t.DialogVisible2=!1}}},[t._v("导出为excel文件")])])],1)},staticRenderFns:[]};var R=a("VU/8")(N,F,!1,function(t){a("Dr4h")},"data-v-f64ce39e",null).exports,z={name:"renamesTable",data:function(){return{tableData:[],isLoading:!0,dialogFormVisible:!1,form:{},formLabelWidth:"150px",isNetErr:!1,count:0,currentPage:1,offset:0,limit:20,search_val:"",downloadsUrl:"",DialogVisible2:!1,uploadUrl:"",isUpload:!1}},computed:{table_height:function(){return this.$store.state.table_height}},mounted:function(){this.getRenames(),this.downloadsUrl=this.API+"/api/v1/renames/downloads/?type=",this.uploadUrl=this.API+"/api/v1/renames/uploads/"},methods:{getRenames:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/api/v1/renames/?limit=20&offset=0",e=this;e.$axios.get(this.API+t).then(function(t){e.tableData=t.data.results,e.isLoading=!1,e.count=t.data.count}).catch(function(t){e.isNetErr=!0})},updateRow:function(t,e){this.form=JSON.parse(n()(e[t])),this.dialogFormVisible=!0},handleSizeChange:function(t){this.limit=t,this.handleCurrentChange(this.currentPage)},handleCurrentChange:function(t){this.isLoading=!0,this.currentPage=t;var e="/api/v1/renames/?limit="+this.limit+"&offset="+(t-1)*this.limit;this.getRenames(e)},search:function(){this.isLoading=!0,""==this.search_val?this.getRenames():this.getRenames("/api/v1/renames/?pathology="+this.search_val)},submit:function(){var t=this;this.$axios.patch(this.API+"/api/v1/renames/"+this.form.id+"/",this.form).then(function(e){t.$message({message:"更新成功！",type:"success"}),t.dialogFormVisible=!1,""!=t.search_val?t.search():t.getRenames("/api/v1/renames/?limit="+t.limit+"&offset="+(t.currentPage-1)*t.limit)}).catch(function(t){})},success_upload:function(t,e,a){this.isUpload=!1,this.$notify({title:"提示",message:"文件更名信息导入成功！",duration:0})},before_upload:function(t){if("application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"!=t.type&&"application/vnd.ms-excel"!=t.type)return this.$message.error("仅支持导入excel和csv格式文件！"),!1;this.isUpload=!0},error_upload:function(t,e,a){this.isUpload=!1,this.$notify({title:"提示",message:"文件更名信息导入失败！",duration:0})},download:function(){this.DialogVisible2=!0}}},E={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"renamesTable dataTable"},[t.isLoading?a("div",{staticClass:"loading"},[a("i",{staticClass:"loading-i fa fa-spinner fa-pulse"}),t._v(" "),t.isNetErr?a("span",[t._v("获取数据失败，请检查网络是否异常")]):a("span",[t._v("正在加载中")])]):a("div",[a("div",{staticClass:"search"},[a("div",[a("el-input",{staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"请输入病理号"},model:{value:t.search_val,callback:function(e){t.search_val=e},expression:"search_val"}}),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.search}},[a("i",{staticClass:"fa fa-search"}),t._v("查询")])],1),t._v(" "),a("div",{staticClass:"search-right"},[a("el-button",{attrs:{type:"primary"},on:{click:t.download}},[t._v("导出")]),t._v(" "),a("el-upload",{attrs:{action:t.uploadUrl,"show-file-list":!1,"on-success":t.success_upload,"on-error":t.error_upload,"before-upload":t.before_upload}},[a("el-button",{attrs:{type:"primary"}},[t._v("导入")])],1)],1)]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,"max-height":t.table_height}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"",prop:"pathology",label:"病理号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"current_file_name",label:"当前文件名","show-overflow-tooltip":!0}}),t._v(" "),a("el-table-column",{attrs:{prop:"his_name1",label:"曾用名1","show-overflow-tooltip":!0}}),t._v(" "),a("el-table-column",{attrs:{prop:"his_name2",label:"曾用名2","show-overflow-tooltip":!0}}),t._v(" "),a("el-table-column",{attrs:{prop:"his_name3",label:"曾用名3","show-overflow-tooltip":!0}}),t._v(" "),a("el-table-column",{attrs:{prop:"his_name4",label:"曾用名4","show-overflow-tooltip":!0}}),t._v(" "),a("el-table-column",{attrs:{prop:"his_name5",label:"曾用名5","show-overflow-tooltip":!0}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){a.preventDefault(),t.updateRow(e.$index,t.tableData)}}},[t._v("\n\t          更新\n\t        ")])]}}])})],1)],1),t._v(" "),t.isLoading?t._e():a("div",{staticClass:"pager"},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[20,50,100],"page-size":t.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.count},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),a("el-dialog",{attrs:{title:"更新更名记录",visible:t.dialogFormVisible,"append-to-body":!0,center:!0},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{attrs:{model:t.form}},[a("el-form-item",{attrs:{label:"病理号","label-width":t.formLabelWidth}},[t._v("\n\t      "+t._s(t.form.pathology)+"\n\t    ")]),t._v(" "),a("el-form-item",{attrs:{label:"当前文件名","label-width":t.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.current_file_name,callback:function(e){t.$set(t.form,"current_file_name",e)},expression:"form.current_file_name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"曾用名1","label-width":t.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.his_name1,callback:function(e){t.$set(t.form,"his_name1",e)},expression:"form.his_name1"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"曾用名2","label-width":t.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.his_name2,callback:function(e){t.$set(t.form,"his_name2",e)},expression:"form.his_name2"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"曾用名3","label-width":t.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.his_name3,callback:function(e){t.$set(t.form,"his_name3",e)},expression:"form.his_name3"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"曾用名4","label-width":t.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.his_name4,callback:function(e){t.$set(t.form,"his_name4",e)},expression:"form.his_name4"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"曾用名5","label-width":t.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.his_name5,callback:function(e){t.$set(t.form,"his_name5",e)},expression:"form.his_name5"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"提示",visible:t.DialogVisible2,width:"30%"},on:{"update:visible":function(e){t.DialogVisible2=e}}},[a("a",{attrs:{href:t.downloadsUrl+"csv"},on:{click:function(e){t.DialogVisible2=!1}}},[t._v("导出为csv文件")]),a("br"),t._v(" "),a("a",{attrs:{href:t.downloadsUrl+"xlsx"},on:{click:function(e){t.DialogVisible2=!1}}},[t._v("导出为excel文件")])])],1)},staticRenderFns:[]};var X=a("VU/8")(z,E,!1,function(t){a("xgy7")},"data-v-4b3c81c2",null).exports,W={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"menusList"},t._l(t.toolbarList,function(e){return a("div",{staticClass:"item",on:{click:function(a){t.toggle(e.id)}}},[a("span",{class:e.id==t.currTable_id?"selected":""},[t._v(t._s(e.name))])])}),0)},staticRenderFns:[]};var O=a("VU/8")({name:"menusList",data:function(){return{toolbarList:[{id:0,name:"首页"},{id:1,name:"病例信息"},{id:2,name:"大图信息"},{id:3,name:"朱博士诊断"},{id:4,name:"审核数据"},{id:5,name:"训练数据"},{id:6,name:"算法版本"},{id:7,name:"文件更名记录"},{id:8,name:"文件名重复"}]}},computed:{currTable_id:function(){return this.$store.state.currTable_id}},methods:{toggle:function(t){this.$store.commit("setCurrTable_id",t)}}},W,!1,function(t){a("wgMj")},"data-v-5e2b8662",null).exports,M={name:"repeatedTable",data:function(){return{activeName:0,tableData:[],isLoading:!0,isNetErr:!1,count:0,currentPage:1,offset:0,limit:20}},computed:{table_height:function(){return this.$store.state.table_height}},mounted:function(){""!=this.$store.state.repeated_val?(this.search_val=this.$store.state.repeated_val,this.search()):this.getCases()},methods:{getCases:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/api/v1/cases/duplicates/?limit=20&offset=0";this.$axios.get(this.API+e).then(function(e){t.isLoading=!1,t.count=e.data.count,t.tableData=e.data.results}).catch(function(e){t.isNetErr=!0})},getImages:function(){var t=this;this.$axios.get(this.API+"/api/v1/images/duplicates/?limit=20&offset=0").then(function(e){t.isLoading=!1,t.count=e.data.count,t.tableData=e.data.results}).catch(function(e){t.isNetErr=!0})},handleClick:function(t,e){console.log(this.activeName),0==this.activeName?this.getCases():this.getImages()},toOther:function(t){0==this.activeName?this.$store.commit("setCurrTable_id",1):this.$store.commit("setCurrTable_id",2),this.$store.commit("setRepeated_val",t)},handleSizeChange:function(t){this.limit=t,this.handleCurrentChange(this.currentPage)},handleCurrentChange:function(t){var e="";this.isLoading=!0,this.currentPage=t,0==this.activeName?e="cases":b="images";var a="/api/v1/"+e+"/duplicates/?limit="+this.limit+"&offset="+(t-1)*this.limit;this.getCases(a)}}},H={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"repeatedTable dataTable"},[a("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"病例信息",name:"0"}}),t._v(" "),a("el-tab-pane",{attrs:{label:"大图信息",name:"1"}})],1),t._v(" "),t.isLoading?a("div",{staticClass:"loading"},[a("i",{staticClass:"loading-i fa fa-spinner fa-pulse"}),t._v(" "),t.isNetErr?a("span",[t._v("获取数据失败，请检查网络是否异常")]):a("span",[t._v("正在加载中")])]):a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,"max-height":t.table_height}},[a("el-table-column",{attrs:{fixed:"",prop:"pathology",label:"病理号"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{cursor:"pointer"},on:{click:function(a){t.toOther(e.row.pathology)}}},[t._v(t._s(e.row.pathology))])]}}])}),t._v(" "),1==t.activeName?a("el-table-column",{attrs:{prop:"",label:"分辨率"}}):t._e(),t._v(" "),a("el-table-column",{attrs:{prop:"dup_count",label:"重复次数"}})],1),t._v(" "),t.isLoading?t._e():a("div",{staticClass:"pager"},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[20,50,100],"page-size":t.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.count},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)],1)},staticRenderFns:[]};var G=a("VU/8")(M,H,!1,function(t){a("XUgF")},"data-v-640b5786",null).exports,B=a("P2DC"),j={name:"checksTable",data:function(){return{tableData:[],isLoading:!0,isNetErr:!1,form:{},dialogFormVisible:!1,formLabelWidth:"150px",count:0,currentPage:1,offset:0,limit:20,search_val:"",labelList:[],downloadsUrl:"",DialogVisible2:!1,uploadUrl:"",isUpdate:!1}},computed:{table_height:function(){return this.$store.state.table_height},repeated_val:function(){return this.$store.state.repeated_val}},created:function(){this.labelList=B,this.downloadsUrl=this.API+"/api/v1/checks/details/downloads/?type=",this.uploadUrl=this.API+"/api/v1/checks/uploads/"},mounted:function(){""!=this.$store.state.repeated_val?(this.search_val=this.$store.state.repeated_val,this.search()):this.getChecks()},destroyed:function(){this.$store.commit("setRepeated_val","")},methods:{getChecks:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/api/v1/checks/?limit=20&offset=0",e=this;e.$axios.get(this.API+t).then(function(t){e.tableData=t.data.results,e.isLoading=!1,e.count=t.data.count}).catch(function(t){e.isNetErr=!0})},deleteRow:function(t,e){var a=this;this.$confirm("此操作将永久删除该文件, 是否继续?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$axios.delete(a.API+"/api/v1/checks/"+e[t].id+"/").then(function(t){a.$message({type:"success",message:"删除成功!"})}).catch(function(t){a.$message("删除接口获取失败！")})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},updateRow:function(t,e){this.form=JSON.parse(n()(e[t])),this.dialogFormVisible=!0},submit:function(){var t=this;this.$axios.patch(this.API+"/api/v1/checks/"+this.form.id+"/",this.form).then(function(e){t.$message({message:"更新成功！",type:"success"}),t.dialogFormVisible=!1,""!=t.search_val?t.search():t.getChecks("/api/v1/checks/?limit="+t.limit+"&offset="+(t.currentPage-1)*t.limit)}).catch(function(t){})},handleSizeChange:function(t){this.limit=t,this.handleCurrentChange(this.currentPage)},handleCurrentChange:function(t){this.isLoading=!0,this.currentPage=t;var e="/api/v1/checks/?limit="+this.limit+"&offset="+(t-1)*this.limit;this.getChecks(e)},search:function(){this.isLoading=!0,""==this.search_val?this.getChecks():this.getChecks("/api/v1/checks/?id="+this.search_val)},download:function(){this.DialogVisible2=!0},copy:function(t){new A.a(".storage_path");this.$message({message:"复制成功！",type:"success"})},update:function(){var t=this;if(!this.isUpdate){var e="";this.$confirm("更新过程可能需要几分钟，请确定是否要更新","提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(function(){t.$confirm("请选择更新哪个数据","提示",{confirmButtonText:"审核数据记录列表",cancelButtonText:"详情信息",type:"warning"}).then(function(){e="sample",t.isUpdate=!0,t.$axios.post(t.API+"/api/v1/checks/updates/",{update_type:e}).then(function(e){t.isUpdate=!1,t.$notify({title:"提示",message:e.data.msg+"(一共耗时："+e.data.cost_time+"秒）",duration:0})}).catch(function(e){t.$notify({title:"提示",message:"审核数据版本更新失败",duration:0})})}).catch(function(){e="detail",t.isUpdate=!0,t.$axios.post(t.API+"/api/v1/checks/updates/",{update_type:e}).then(function(e){t.isUpdate=!1,t.$notify({title:"提示",message:e.data.msg+"(一共耗时："+e.data.cost_time+"秒）",duration:0})}).catch(function(e){t.$notify({title:"提示",message:"审核数据版本更新失败",duration:0})})})}).catch(function(){t.$message({type:"info",message:"已取消更新"})})}}}},J={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"checksTable dataTable"},[t.isLoading?a("div",{staticClass:"loading"},[a("i",{staticClass:"loading-i fa fa-spinner fa-pulse"}),t._v(" "),t.isNetErr?a("span",[t._v("获取数据失败，请检查网络是否异常")]):a("span",[t._v("正在加载中")])]):a("div",[a("div",{staticClass:"search"},[a("div",[a("el-input",{staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"请输入病理号"},model:{value:t.search_val,callback:function(e){t.search_val=e},expression:"search_val"}}),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.search}},[a("i",{staticClass:"fa fa-search"}),t._v("查询")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.update}},[t._v(t._s(t.isUpdate?"正在更新中...":"更新")),t.isUpdate?a("i",{staticClass:"fa fa-spinner fa-pulse"}):t._e()])],1),t._v(" "),a("div",{staticClass:"search-right"},[a("el-button",{attrs:{type:"primary"},on:{click:t.download}},[t._v("导出")])],1)]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,"max-height":t.table_height}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"",prop:"id",label:"id"}}),t._v(" "),a("el-table-column",{attrs:{prop:"check_version_number",label:"审核版本号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"cells_number",label:"细胞数量"}}),t._v(" "),a("el-table-column",{attrs:{prop:"class_number",label:"分类数量"}}),t._v(" "),a("el-table-column",{attrs:{prop:"classify",label:"分类","show-overflow-tooltip":!0}}),t._v(" "),a("el-table-column",{attrs:{prop:"check_date",label:"采样/检查时间","show-overflow-tooltip":!0}}),t._v(" "),a("el-table-column",{attrs:{prop:"storage_path",label:"存储路径","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"storage_path",attrs:{"data-clipboard-text":e.row.storage_path},on:{click:t.copy}},[t._v(t._s(e.row.storage_path))]),t._v(" "),a("span",[t._v("（单击可复制）")])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"image_format",label:"图像格式"}}),t._v(" "),a("el-table-column",{attrs:{prop:"source",label:"数据来源","show-overflow-tooltip":!0}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){a.preventDefault(),t.updateRow(e.$index,t.tableData)}}},[t._v("\n\t          更新\n\t        ")])]}}])})],1)],1),t._v(" "),t.isLoading?t._e():a("div",{staticClass:"pager"},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[20,50,100],"page-size":t.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.count},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),a("el-dialog",{attrs:{title:"更新审核记录",visible:t.dialogFormVisible,"append-to-body":!0,center:!0},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{attrs:{model:t.form}},[a("el-form-item",{attrs:{label:"id","label-width":t.formLabelWidth}},[t._v("\n\t      "+t._s(t.form.id)+"\n\t    ")]),t._v(" "),a("el-form-item",{attrs:{label:"数据来源","label-width":t.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.source,callback:function(e){t.$set(t.form,"source",e)},expression:"form.source"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"提示",visible:t.DialogVisible2,width:"30%"},on:{"update:visible":function(e){t.DialogVisible2=e}}},[a("a",{attrs:{href:t.downloadsUrl+"csv"},on:{click:function(e){t.DialogVisible2=!1}}},[t._v("导出为csv文件")]),a("br"),t._v(" "),a("a",{attrs:{href:t.downloadsUrl+"xlsx"},on:{click:function(e){t.DialogVisible2=!1}}},[t._v("导出为excel文件")])])],1)},staticRenderFns:[]};var Q={name:"index",data:function(){return{}},computed:{currTable_id:function(){return this.$store.state.currTable_id}},components:{indexCon:w,topHeader:f,casesTable:D,diagnosisTable:V,imagesTable:R,menusList:O,renamesTable:X,repeatedTable:G,checksTable:a("VU/8")(j,J,!1,function(t){a("Op5Z")},"data-v-215d0b39",null).exports},created:function(){}},q={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"index"},[a("div",{staticClass:"topHeader"},[a("topHeader")],1),t._v(" "),a("div",{staticClass:"contain"},[a("div",{staticClass:"left"},[a("menusList")],1),t._v(" "),a("div",{staticClass:"right"},[0==t.currTable_id?a("indexCon"):1==t.currTable_id?a("casesTable"):2==t.currTable_id?a("imagesTable"):3==t.currTable_id?a("diagnosisTable"):4==t.currTable_id?a("checksTable"):7==t.currTable_id?a("renamesTable"):8==t.currTable_id?a("repeatedTable"):t._e()],1)])])},staticRenderFns:[]};var Y=a("VU/8")(Q,q,!1,function(t){a("d29Y")},"data-v-691bf156",null).exports,Z=["1","2","3","4","5","6","7","8","9","0","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],K={name:"login",data:function(){return{name:"",pass:"",verify:"",rand:""}},mounted:function(){this.drawCode()},methods:{reset:function(){this.name="",this.pass=""},submit:function(){var t=this.rand,e=$("#verify").val().toUpperCase();if(0==e)this.$message({message:"请输入验证码",type:"warning"});else if(e!=t)this.$message({message:"验证码不正确，请重新输入",type:"warning"}),e="";else{this.name,this.pass;this.$store.commit("setLogin",{token:"12121dfdsfdsfdfs",user:{username:"jeff"}}),this.$router.push({path:"/"})}},drawCode:function(){var t=document.getElementById("verifyCanvas"),e=t.getContext("2d");e.fillStyle="cornflowerblue",e.fillRect(0,0,t.width,t.height);var a=e.createLinearGradient(0,0,t.width,0);a.addColorStop("0","magenta"),a.addColorStop("0.5","blue"),a.addColorStop("1.0","red"),e.fillStyle=a,e.font="25px Arial";for(var i=new Array,s=new Array,l=new Array,o=0;o<4;o++)i[o]=Z[Math.floor(Math.random()*Z.length)],s[o]=16*o+10,l[o]=20*Math.random()+20,e.fillText(i[o],s[o],l[o]);for(o=0;o<3;o++)this.drawline(t,e);for(o=0;o<30;o++)this.drawDot(t,e);this.convertCanvasToImage(t),this.rand=i.join("").toUpperCase()},drawline:function(t,e){e.moveTo(Math.floor(Math.random()*t.width),Math.floor(Math.random()*t.height)),e.lineTo(Math.floor(Math.random()*t.width),Math.floor(Math.random()*t.height)),e.lineWidth=.5,e.strokeStyle="rgba(50,50,50,0.3)",e.stroke()},drawDot:function(t,e){var a=Math.floor(Math.random()*t.width),i=Math.floor(Math.random()*t.height);e.moveTo(a,i),e.lineTo(a+1,i+1),e.lineWidth=.2,e.stroke()},convertCanvasToImage:function(t){document.getElementById("verifyCanvas").style.display="none";var e=document.getElementById("code_img");return e.src=t.toDataURL("image/png"),e},refresh:function(){$("#verifyCanvas").remove(),$("#verify").after('<canvas width="100" height="40" id="verifyCanvas"></canvas>'),this.drawCode()}}},tt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"contain"},[a("div",{staticClass:"title"},[t._v("DMS数据管理系统")]),t._v(" "),a("div",{staticClass:"login"},[a("div",{staticClass:"login-username"},[a("i",{staticClass:"fa fa-user-circle-o"}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],attrs:{type:"text",placeholder:"请输入用户名",name:"username"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"login-password"},[a("i",{staticClass:"fa fa-key"}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.pass,expression:"pass"}],attrs:{type:"password",placeholder:"请输入密码",name:"password"},domProps:{value:t.pass},on:{input:function(e){e.target.composing||(t.pass=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"login-verify"},[a("div",{},[a("i",{staticClass:"fa fa-keyboard-o"}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.verify,expression:"verify"}],attrs:{type:"text",placeholder:"请输入验证码",id:"verify",name:"verify"},domProps:{value:t.verify},on:{input:function(e){e.target.composing||(t.verify=e.target.value)}}})]),t._v(" "),a("div",{},[a("canvas",{attrs:{width:"100",height:"40",id:"verifyCanvas"}}),t._v(" "),a("img",{attrs:{id:"code_img"},on:{click:t.refresh}})])])]),t._v(" "),a("div",{staticClass:"contain-btn"},[a("div",{staticClass:"btn-submit",on:{click:t.submit}},[t._v("登录")]),t._v(" "),a("div",{staticClass:"btn-reset",on:{click:t.reset}},[t._v("重置")])])])},staticRenderFns:[]};var et=a("VU/8")(K,tt,!1,function(t){a("3cGc")},"data-v-003e4bb0",null).exports;l.default.use(m.a);var at=new m.a({routes:[{path:"/",name:"index",component:Y},{path:"/login",name:"login",component:et}]}),it=a("zL8q"),st=a.n(it),lt=(a("tvR6"),a("mtWM")),ot=a.n(lt),nt=a("mw3O"),rt=a.n(nt);a("7t+N");l.default.config.productionTip=!1,l.default.use(st.a),l.default.prototype.$axios=ot.a,ot.a.interceptors.request.use(function(t){return"post"==t.method&&(t.data=rt.a.stringify(t.data)),t},function(t){return s.a.reject(t)}),ot.a.interceptors.response.use(function(t){return t},function(t){return s.a.reject(t)}),l.default.prototype.API="/API",new l.default({el:"#app",router:at,store:h,components:{App:d},template:"<App/>"})},ODQP:function(t,e){},Op5Z:function(t,e){},P2DC:function(t,e){t.exports={diagnosis_label:[{label_name:"NORMAL",label_val:"NORMAL"},{label_name:"ASCUS",label_val:"ASCUS"},{label_name:"LSIL",label_val:"LSIL"},{label_name:"ASC-H",label_val:"ASC-H"},{label_name:"HSIL",label_val:"HSIL"},{label_name:"SCC",label_val:"SCC"},{label_name:"AGC1",label_val:"AGC1"},{label_name:"AGC2",label_val:"AGC2"},{label_name:"AGC3",label_val:"AGC3"},{label_name:"ADC",label_val:"ADC"},{label_name:"TRI",label_val:"TRI"},{label_name:"FUNGI",label_val:"FUNGI"},{label_name:"ACTINO",label_val:"ACTINO"},{label_name:"HSV",label_val:"HSV"},{label_name:"CC",label_val:"CC"},{label_name:"EC",label_val:"EC"}],waveplate_source:[{label_name:"华银",label_val:"华银"},{label_name:"南方医院",label_val:"南方医院"},{label_name:"深圳",label_val:"深圳"},{label_name:"郑州",label_val:"郑州"},{label_name:"泉州",label_val:"泉州"}],making_way:[{label_name:"沉降式",label_val:"沉降式"},{label_name:"膜式",label_val:"膜式"}],resolution:[{label_name:"20X",label_val:"20X"},{label_name:"40X",label_val:"40X"}]}},XQYN:function(t,e){},XUgF:function(t,e){},"d+db":function(t,e){},d29Y:function(t,e){},qr23:function(t,e){},tvR6:function(t,e){},wgMj:function(t,e){},xgy7:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.a99944090d08fc359a88.js.map